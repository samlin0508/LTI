<header class="site-header">
  <div class="header-overlay">
    <!-- <h1>Undefined - 雜記</h1> -->
    <p>工程師 × 投資 × 生活紀錄</p>
  </div>
</header>

<main>
  <h1>EPS 趨勢分析</h1>

  <p>這是一個追蹤金融股 EPS 以及股利趨勢的小工具，主要是讓長期持有金融股的朋友們有一個方便的介面可以快速掌握 EPS 動態以及過往股利的派發紀錄。</p>

  <div class="select-container">
    <mat-form-field>
      <mat-label>公司代號</mat-label>

      <mat-select 
        [formControl]="stockControl"
        (selectionChange)="onStockSelectionChange($event)"
        placeholder="請選擇"
      >
        @for (option of entities; track option) {
          <mat-option [value]="option.id">{{ (`${option.id} ${option.name}`) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  <div class="select-container">
    <h2 id="epsYoy">{{ getEntityName(stockControl.value) }} EPS 同期比較</h2>

    <button 
      matIconButton
      [cdkCopyToClipboard]="`${baseUrl}?id=${stockControl.value}#epsYoy`"
    >
      <mat-icon>link</mat-icon>
    </button>
  </div>


  <h4>比較最近 N 年同月份的 EPS，可以透過下方的查看區間選擇想要查看的年份。</h4>

  <p>⚠️ 由於官方並沒有提供每個月的 EPS，這裡在計算每個月 EPS 的方式是採用：第 N 月 EPS = 第 N 月累計 EPS - 第 (N - 1) 月 累計 EPS。</p>

  <div class="select-container">
    <mat-form-field>
      <mat-label>查看區間</mat-label>

      <mat-select 
        [formControl]="lastNYearsOfEpsYoyControl"
        (selectionChange)="onLastNYearsOfEpsYoySelectionChange($event)"
        placeholder="請選擇"
      >
        @for (option of lastNYearsOfEpsYoy; track option) {
          <mat-option [value]="option.id">{{ (`${option.name}`) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  <div 
    echarts
    [options]="optionsEpsYoy"
    [theme]="'dark'"
    (chartInit)="onEpsYoyBarChartInit($event)"
  ></div>

  <div class="select-container">
    <h2 id="epsVsDividends">{{ getEntityName(stockControl.value) }} EPS vs 股利</h2>

    <button 
      matIconButton
      [cdkCopyToClipboard]="`${baseUrl}?id=${stockControl.value}#epsVsDividends`"
    >
      <mat-icon>link</mat-icon>
    </button>
  </div>

  <h4>比較最近 N 年的 EPS 以及對應的股利（現金股利以及股票股利），可以透過下方的查看區間選擇想要查看的年份。</h4>

  <p>⚠️ 百分比表示當年度的配發率。</p>

  <div class="select-container">
    <mat-form-field>
      <mat-label>查看區間</mat-label>

      <mat-select 
        [formControl]="lastNYearsOfEpsVsDividendsControl"
        (selectionChange)="onLastNYearsOfEpsVsDividendsSelectionChange($event)"
        placeholder="請選擇"
      >
        @for (option of lastNYearsOfEpsVsDividends; track option) {
          <mat-option [value]="option.id">{{ (`${option.name}`) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  <div 
    echarts 
    [options]="optionsEpsVsDividends"
    [theme]="'dark'"
    (chartInit)="onEpsVsDividendsBarChartInit($event)"
  ></div>

  <mat-divider></mat-divider>

  <div class="select-container">
    <h2 id="monthlyEpsComparison">同月 EPS 在不同公司間做比較</h2>

    <button 
      matIconButton
      [cdkCopyToClipboard]="`${baseUrl}?id=${stockControl.value}&ids=${stocksOfMonthlyEpsComparisonControl.value.join(',')}&year=${yearsOfMonthlyEpsComparisonControl.value}#monthlyEpsComparison`"
    >
      <mat-icon>link</mat-icon>
    </button>
  </div>

  <h4>選擇多個公司代號進行同月 EPS 比較，可以透過下方的查看區間選擇想要查看的年份。</h4>

  <div class="select-container">
    <mat-form-field>
      <mat-label>查看區間</mat-label>

      <mat-select 
        [formControl]="yearsOfMonthlyEpsComparisonControl"
        placeholder="請選擇"
      >
        @for (option of yearsOfMonthlyEpsComparison; track option) {
          <mat-option [value]="option.id">{{ (`${option.name}`) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>公司代號</mat-label>

      <mat-select 
        [formControl]="stocksOfMonthlyEpsComparisonControl"
        multiple
        placeholder="請選擇"
      >
        @for (option of entities; track option) {
          <mat-option [value]="option.id">{{ (`${option.id} ${option.name}`) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <button 
      matFab
      class="query-button"
      (click)="onMonthlyEpsComparisonClick($event)"
    >
      <mat-icon>query_stats</mat-icon>
    </button>
  </div>

  <div 
    echarts 
    [options]="optionsMonthlyEpsComparison"
    [theme]="'dark'"
    (chartInit)="onMonthlyEpsComparisonBarChartInit($event)"
  ></div>

  <div class="select-container">
    <h2 id="yearlyEpsComparison">同年 EPS 在不同公司間做比較</h2>

    <button 
      matIconButton
      [cdkCopyToClipboard]="`${baseUrl}?id=${stockControl.value}&ids=${stocksOfYearlyEpsComparisonControl.value.join(',')}&years=${yearsOfYearlyEpsComparisonControl.value}#yearlyEpsComparison`"
    >
      <mat-icon>link</mat-icon>
    </button>
  </div>

  <h4>選擇多個公司代號進行同年 EPS 比較，可以透過下方的查看區間選擇想要查看的年份。</h4>

  <div class="select-container">
    <mat-form-field>
      <mat-label>查看區間</mat-label>

      <mat-select 
        [formControl]="yearsOfYearlyEpsComparisonControl"
        multiple
        placeholder="請選擇"
      >
        @for (option of yearsOfMonthlyEpsComparison; track option) {
          <mat-option [value]="option.id">{{ (`${option.name}`) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>公司代號</mat-label>

      <mat-select 
        [formControl]="stocksOfYearlyEpsComparisonControl"
        multiple
        placeholder="請選擇"
      >
        @for (option of entities; track option) {
          <mat-option [value]="option.id">{{ (`${option.id} ${option.name}`) }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <button 
      matFab
      class="query-button"
      (click)="onYearlyEpsComparisonClick($event)"
    >
      <mat-icon>query_stats</mat-icon>
    </button>
  </div>

  <div 
    echarts 
    [options]="optionsYearlyEpsComparison"
    [theme]="'dark'"
    (chartInit)="onYearlyEpsComparisonBarChartInit($event)"
  ></div>

  <p>⚠️ 網站的數據盡可能的追求正確，但如果您發現數字跟您所認知的有差異時，還請以 MOPS 公開資訊觀測站的數據為主。</p>
</main>

<footer class="site-footer">
  <div class="footer-mask">
    <div class="footer-content">
      <div class="footer-links">
        <a
          href="https://www.facebook.com/undefined.notes"
          target="_blank"
          rel="noopener noreferrer"
          class="fb-link"
          aria-label="Facebook 專頁 Undefined - 雜記"
        >
          <svg
            class="fb-icon"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              fill="currentColor"
              d="M22.675 0h-21.35C.597 0 0 .597 0 1.326v21.348C0 23.403.597 24 1.326 24h11.495v-9.294H9.691V11.01h3.13V8.309c0-3.1 1.894-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.696h-3.12V24h6.116C23.403 24 24 23.403 24 22.674V1.326C24 .597 23.403 0 22.675 0z"
            />
          </svg>
          <span class="fb-text">Undefined - 雜記</span>
        </a>
        <!-- <a href="https://youtube.com/你的頻道" target="_blank">YouTube</a> -->
      </div>
    </div>
  </div>
</footer>

